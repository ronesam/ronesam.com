// Generated by CoffeeScript 1.10.0
$(function() {
  var time;
  $('#regexper').click(function() {
    var exp;
    exp = $('#regexp-input').val();
    if (!exp) {
      alert('Enter JavaScript-style regular expression to display');
      return false;
    }
    $('#svg .root').remove();
    $('#svg').show();
    regexper.render('#svg', exp);
    $('#regexper-result').html($('#regexper-render').html());
  });
  time = 0;
  $('#match').click(function() {
    var arr, count, exp, match_times, reg, result, val;
    val = $('#match-input').val();
    exp = $('#regexp-input').val();
    if (!val) {
      alert('Enter something that u want to match');
      return false;
    }
    if (!exp) {
      alert('Enter JavaScript-style regular expression to display');
      return false;
    }
    time++;
    $('#found-times').html(time);
    match_times = $('#match-times');
    result = $('#match-result');
    result.empty();
    arr = exp.match(/(\/?)(.+)(\1)([ig]*)/);
    reg = new RegExp(arr[2], arr[4]);
    count = 0;
    val.replace(reg, function() {
      var arg, back, i, j, len;
      back = back = ['<li><ul>'];
      count++;
      back.push('<li>此为第 <i>' + count + '</i> 处匹配：</li>');
      for (i = j = 0, len = arguments.length; j < len; i = ++j) {
        arg = arguments[i];
        if (i < arguments.length - 3) {
          back.push('<li>$' + i + ':<span style="padding-left:1em">' + arg + '</span></li>');
        }
      }
      back.push('</ul></li>');
      result.append(back.join(''));
    });
    if (!count) {
      match_times.html(0);
    } else {
      match_times.html(count);
      result.show();
    }
  });
});
