<!DOCTYPE html><html><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="chrome=1"/><title>JSONP(JSON with Padding): 全栈开发之旅</title><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"/><meta name="author" content="ronesam"/><meta name="description" content="JSON(JavaScript Object Notation) 是一种轻量级的数据交换格式。它使得人们很容易的进行阅读和编写。同时也方便了机器进行解析和生成。它是基于 JavaScript Programming Language , Standard ECMA-262 3rd Edition - December 1999 的一个子集。 JSON采用完全独立于程序语言的文本格式，但是也使用了类">
<meta property="og:type" content="article">
<meta property="og:title" content="JSONP(JSON with Padding)">
<meta property="og:url" content="https://ronesam.com/wind/interface/jsonp/index.html">
<meta property="og:site_name" content="全栈开发之旅">
<meta property="og:description" content="JSON(JavaScript Object Notation) 是一种轻量级的数据交换格式。它使得人们很容易的进行阅读和编写。同时也方便了机器进行解析和生成。它是基于 JavaScript Programming Language , Standard ECMA-262 3rd Edition - December 1999 的一个子集。 JSON采用完全独立于程序语言的文本格式，但是也使用了类">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2017-10-24T07:34:20.802Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="JSONP(JSON with Padding)">
<meta name="twitter:description" content="JSON(JavaScript Object Notation) 是一种轻量级的数据交换格式。它使得人们很容易的进行阅读和编写。同时也方便了机器进行解析和生成。它是基于 JavaScript Programming Language , Standard ECMA-262 3rd Edition - December 1999 的一个子集。 JSON采用完全独立于程序语言的文本格式，但是也使用了类"><link rel="icon" type="image/x-icon" href="/zero/img/favicon.ico"/><link rel="stylesheet" href="/vendor/bootstrap/3.3.5/css/bootstrap.min.css"><link rel="stylesheet" href="/vendor/font-awesome/4.4.0/css/font-awesome.min.css"><link rel="stylesheet" href="/vendor/remodal/1.0.5/remodal.min.css"><link rel="stylesheet" href="/vendor/remodal/1.0.5/remodal-default-theme.min.css"><!--如果文章中有图片（除画廊外），则载入fancybox特效相关样式--><link rel="stylesheet" href="/vendor/fancybox/2.1.5/jquery.fancybox.min.css"><link rel="stylesheet" href="/zero/css/style.css"><script src="/vendor/jquery/2.1.4/jquery.min.js"></script></head><body><div class="wrapper"><header id="header"><div class="title"><h1><a href="/">全栈开发之旅</a></h1><p class="fa fa-github-alt"><a href="/about/summary/" target="_blank">学以致用, 知行合一</a></p></div><nav class="nav"><ul><li><a href="/air/summary/">交互层</a></li><li><a href="/fire/summary/">业务层</a></li><li><a href="/water/summary/">服务层</a></li><li><a href="/earth/summary/">事务层</a></li></ul><div class="clearfix"></div></nav><div class="clearfix"></div></header><div class="content"><article class="post"><header><div class="icon"></div><a href="/wind/interface/jsonp/"><time datetime="2016-01-05T05:43:30.000Z">2016-01-05</time></a><h1 class="title">JSONP(JSON with Padding)</h1></header><div class="entry"><blockquote><p>JSON(JavaScript Object Notation) 是一种轻量级的数据交换格式。它使得人们很容易的进行阅读和编写。同时也方便了机器进行解析和生成。它是基于 JavaScript Programming Language , Standard ECMA-262 3rd Edition - December 1999 的一个子集。 JSON采用完全独立于程序语言的文本格式，但是也使用了类C语言的习惯（包括C, C++, C#, Java, JavaScript, Perl, Python等）。这些特性使JSON成为理想的数据交换语言。</p>
<footer><strong>JSON中国</strong><cite><a href="http://www.json.org.cn/" target="_blank" rel="external">www.json.org.cn</a></cite></footer></blockquote>
<a id="more"></a>
<p>和AJAX一样，<code>JSON</code>和<code>JSONP</code>也不是什么新东西。</p>
<p>我们知道，<code>JavaScript</code>有六种基本数据类型，并可以用<code>typeof</code>来检测：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">switch</span> (<span class="keyword">typeof</span>(var_name))&#123;</div><div class="line">  <span class="keyword">case</span> <span class="string">'undefined'</span>:</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'未定义值'</span>);</div><div class="line">    <span class="keyword">break</span>;</div><div class="line">  <span class="keyword">case</span> <span class="string">'boolean'</span>:</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'布尔值'</span>);</div><div class="line">    <span class="keyword">break</span>;</div><div class="line">  <span class="keyword">case</span> <span class="string">'string'</span>:</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'字符串'</span>);</div><div class="line">    <span class="keyword">break</span>;</div><div class="line">  <span class="keyword">case</span> <span class="string">'number'</span>:</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'数值'</span>);</div><div class="line">    <span class="keyword">break</span>;</div><div class="line">  <span class="keyword">case</span> <span class="string">'function'</span>:</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'函数'</span>);</div><div class="line">    <span class="keyword">break</span>;</div><div class="line">  <span class="keyword">case</span> <span class="string">'object'</span>:</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'对象或null'</span>);</div><div class="line">    <span class="keyword">break</span>;  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><code>JSON</code>就是<code>JavaScript Object</code>，但<code>JavaScript Object</code>却并不一定是<code>JSON</code>。</p>
<p>我们可以通过如下方式定义一个<code>JavaScript Object</code>:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  a: <span class="literal">undefined</span>,</div><div class="line">  b: <span class="literal">true</span>,</div><div class="line">  c: <span class="number">1</span>,</div><div class="line">  d: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line"></div><div class="line">     &#125;,</div><div class="line">  e: &#123;</div><div class="line"></div><div class="line">     &#125;,</div><div class="line">  f: [],</div><div class="line">  g: <span class="literal">null</span></div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>文章开头的引文中提到：</p>
<blockquote>
<p>JSON(JavaScript Object Notation) 是一种轻量级的<strong>数据交换格式</strong>。</p>
</blockquote>
<p>既然是<strong>交换格式</strong>，意味着必须通用。</p>
<p>上述定义中：</p>
<ul>
<li><code>a: undefined</code>：定义一个未定义的变量（这话透着别扭）；</li>
<li><code>d: function(){}</code>：定义一个函数字面量；</li>
</ul>
<p>并非所有其它语言通用的做法。将它们剔除掉，剩下的就是一串标准的<code>JSON</code>：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  b: <span class="literal">true</span>,</div><div class="line">  c: <span class="number">1</span></div><div class="line">  e: &#123;</div><div class="line"></div><div class="line">     &#125;,</div><div class="line">  f: [],</div><div class="line">  g: <span class="literal">null</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>那么什么又是<code>JSONP（JSON with Padding）</code>呢？</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> JSONP=<span class="built_in">document</span>.createElement(<span class="string">"script"</span>);  </div><div class="line">JSONP.type=<span class="string">"text/javascript"</span>;  </div><div class="line">JSONP.src=<span class="string">"http://crossdomain.com/services.php?callback=jsonpCallback"</span>;  </div><div class="line"><span class="built_in">document</span>.getElementsByTagName(<span class="string">"head"</span>)[<span class="number">0</span>].appendChild(JSONP);</div></pre></td></tr></table></figure></div><footer><div class="shares fa fa-weixin"><a>分享到微信</a></div></footer><div class="clearfix"></div></article><aside><ul class="action">   <li title="回到顶部" class="icon-arrow-up"> </li><li title="索引" data-remodal-target="toc" class="icon-toc"></li><li title="评论" data-remodal-target="comment" class="icon-comment"></li><li title="全屏" class="icon-fullscreen"></li></ul><ul class="page"> <li class="icon-prev"></li><li title="目录" data-remodal-target="summary" class="icon-summary"></li><li class="icon-next"></li></ul></aside><div data-remodal-id="toc" data-remodal-options="hashTracking: false" class="remodal"><button data-remodal-action="close" class="remodal-close"></button><h3>索引</h3><article class="toc"></article></div><div data-remodal-id="summary" data-remodal-options="hashTracking: false" class="remodal"><button data-remodal-action="close" class="remodal-close"></button><h3>目录</h3><article class="summary"></article></div><div data-remodal-id="comment" data-remodal-options="hashTracking: false" class="remodal"><button data-remodal-action="close" class="remodal-close"></button><h3>评论</h3><article class="comment"><div data-thread-key="ronesam" data-title="JSONP(JSON with Padding)" data-url="/wind/interface/jsonp/" class="ds-thread"></div></article></div></div></div><footer id="footer"><div class="copyright">&copy; 2017 <a href="/">ronesam</a></div><div class="theme-copyright">Theme by <a href="https://github.com/orderedlist" target="_blank">orderedlist</a>  | Redesign by <a href="https://ronesam.com/about/summary/" target="_blank">ronesam</a></div><div class="clearfix"></div></footer><script src="/vendor/remodal/1.0.5/remodal.min.js"></script><script src="/vendor/screenfull.js/2.0.0/screenfull.min.js"></script><!--需要先载入全屏的函数，aside里面会重写，加入回调--><script src="/zero/js/aside.js"></script><script>var duoshuoQuery = {short_name: 'ronesam'};</script><!--如果文章中有图片（除画廊外），则载入fancybox特效相关代码--><script src="/vendor/fancybox/2.1.5/jquery.fancybox.min.js"></script><script>//给所有的图片打上标识，供fancybox（除了明确表示非fancybox）调用
$('.entry').each(function(i) {
  $(this).find('img:not([class*="no-fancybox"])').each(function () {
    var alt = this.alt;
    if(alt) {
      $(this).after('<span class="caption">' + alt + '</span>');
    }
    if($(this).parent('a').length === 0) {
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox" rel="gallery' + i + '" />');
    }
  });
});
//启动fancybox
$('.fancybox').fancybox();</script></body></html>